(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[744],{2898:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var s=r(2265),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),l=(e,t)=>{let r=(0,s.forwardRef)(({color:r="currentColor",size:l=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:d="",children:c,...u},x)=>(0,s.createElement)("svg",{ref:x,...a,width:l,height:l,stroke:r,strokeWidth:o?24*Number(i)/Number(l):i,className:["lucide",`lucide-${n(e)}`,d].join(" "),...u},[...t.map(([e,t])=>(0,s.createElement)(e,t)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r}},1981:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(2898).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},3067:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(2898).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},8203:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(2898).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},3008:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(2898).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},6141:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(2898).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},1298:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(2898).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},6637:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(2898).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},2104:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(2898).Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},1700:function(e,t,r){Promise.resolve().then(r.bind(r,1967))},1967:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var s=r(7437),a=r(2265),n=r(4033),l=r(5922),i=r(6141),o=r(3008),d=r(2104),c=r(1981),u=r(6637),x=r(3067),m=r(1298),h=r(8203);function p(){let e=(0,n.useRouter)(),[t,r]=(0,a.useState)(!0),[p,b]=(0,a.useState)([]),[f,g]=(0,a.useState)("all");async function y(){let{data:{user:t}}=await l.O.auth.getUser();t||e.push("/login")}async function w(){try{let{data:{user:e}}=await l.O.auth.getUser();if(!e)return;let{data:t}=await l.O.from("profiles").select("client_id").eq("id",e.id).single();if(!(null==t?void 0:t.client_id))return;let{data:r,error:s}=await l.O.from("quotes").select("\n          *,\n          quote_items(count)\n        ").eq("client_id",t.client_id).order("created_at",{ascending:!1});if(s)throw s;let a=(null==r?void 0:r.map(e=>{var t,r;return{...e,items_count:(null===(r=e.quote_items)||void 0===r?void 0:null===(t=r[0])||void 0===t?void 0:t.count)||0}}))||[];b(a)}catch(e){console.error("Erro ao carregar or\xe7amentos:",e)}finally{r(!1)}}function v(e){return({pending:"Aguardando",approved:"Aprovado",rejected:"Rejeitado",expired:"Expirado",converted:"Convertido"})[e]||e}(0,a.useEffect)(()=>{y(),w()},[]);let j="all"===f?p:p.filter(e=>e.status===f),N=p.filter(e=>"pending"===e.status).length;return t?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:[(0,s.jsx)("header",{className:"bg-white/80 backdrop-blur-xl border-b border-slate-200/60 sticky top-0 z-50",children:(0,s.jsx)("div",{className:"max-w-6xl mx-auto px-6 py-4",children:(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("button",{onClick:()=>e.back(),className:"p-2.5 hover:bg-slate-100 rounded-xl transition-all duration-200",children:(0,s.jsx)(x.Z,{className:"w-5 h-5 text-slate-700"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-xl font-bold text-slate-900",children:"Or\xe7amentos"}),(0,s.jsx)("p",{className:"text-sm text-slate-500",children:N>0?"".concat(N," aguardando aprova\xe7\xe3o"):"Todos os or\xe7amentos"})]})]})})})}),(0,s.jsxs)("main",{className:"max-w-6xl mx-auto px-6 py-8",children:[(0,s.jsxs)("div",{className:"flex gap-3 mb-6 overflow-x-auto pb-2",children:[(0,s.jsxs)("button",{onClick:()=>g("all"),className:"px-4 py-2 rounded-xl font-medium whitespace-nowrap transition-all ".concat("all"===f?"bg-white text-blue-600 shadow-sm border border-blue-200":"bg-white/60 text-slate-600 hover:bg-white"),children:["Todos (",p.length,")"]}),(0,s.jsxs)("button",{onClick:()=>g("pending"),className:"px-4 py-2 rounded-xl font-medium whitespace-nowrap transition-all ".concat("pending"===f?"bg-white text-amber-600 shadow-sm border border-amber-200":"bg-white/60 text-slate-600 hover:bg-white"),children:["Aguardando (",p.filter(e=>"pending"===e.status).length,")"]}),(0,s.jsxs)("button",{onClick:()=>g("approved"),className:"px-4 py-2 rounded-xl font-medium whitespace-nowrap transition-all ".concat("approved"===f?"bg-white text-emerald-600 shadow-sm border border-emerald-200":"bg-white/60 text-slate-600 hover:bg-white"),children:["Aprovados (",p.filter(e=>"approved"===e.status).length,")"]}),(0,s.jsxs)("button",{onClick:()=>g("rejected"),className:"px-4 py-2 rounded-xl font-medium whitespace-nowrap transition-all ".concat("rejected"===f?"bg-white text-red-600 shadow-sm border border-red-200":"bg-white/60 text-slate-600 hover:bg-white"),children:["Rejeitados (",p.filter(e=>"rejected"===e.status).length,")"]})]}),(0,s.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:0===j.length?(0,s.jsxs)("div",{className:"col-span-2 bg-white/80 backdrop-blur-xl rounded-2xl shadow-sm border border-slate-200/60 p-16 text-center",children:[(0,s.jsx)(m.Z,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-lg font-medium text-slate-700 mb-2",children:"all"===f?"Nenhum or\xe7amento":"Nenhum or\xe7amento ".concat(v(f).toLowerCase())}),(0,s.jsx)("p",{className:"text-sm text-slate-500",children:"Quando recebermos or\xe7amentos, eles aparecer\xe3o aqui"})]}):j.map(t=>{var r;return(0,s.jsxs)("div",{onClick:()=>e.push("/quotes/".concat(t.id)),className:"group bg-white/80 backdrop-blur-xl rounded-2xl p-6 shadow-sm hover:shadow-xl transition-all duration-300 cursor-pointer border border-slate-200/60 hover:border-blue-300",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("span",{className:"text-sm font-mono text-slate-500",children:t.quote_number}),"pending"===t.status&&new Date(t.valid_until)<new Date&&(0,s.jsx)("span",{className:"text-xs px-2 py-0.5 bg-red-100 text-red-700 rounded-full font-medium",children:"Expirado"})]}),(0,s.jsx)("h3",{className:"font-semibold text-slate-900 text-lg group-hover:text-blue-600 transition-colors",children:t.title})]}),(0,s.jsxs)("span",{className:"flex items-center gap-1.5 text-xs px-3 py-1.5 rounded-full font-medium border ".concat({pending:"bg-amber-50 text-amber-700 border-amber-200",approved:"bg-emerald-50 text-emerald-700 border-emerald-200",rejected:"bg-red-50 text-red-700 border-red-200",expired:"bg-slate-50 text-slate-700 border-slate-200",converted:"bg-blue-50 text-blue-700 border-blue-200"}[t.status]||"bg-gray-50 text-gray-700 border-gray-200"),children:[(r=t.status,({pending:(0,s.jsx)(i.Z,{className:"w-4 h-4"}),approved:(0,s.jsx)(o.Z,{className:"w-4 h-4"}),rejected:(0,s.jsx)(d.Z,{className:"w-4 h-4"}),expired:(0,s.jsx)(c.Z,{className:"w-4 h-4"}),converted:(0,s.jsx)(u.Z,{className:"w-4 h-4"})})[r]||(0,s.jsx)(u.Z,{className:"w-4 h-4"})),v(t.status)]})]}),t.description&&(0,s.jsx)("p",{className:"text-sm text-slate-600 line-clamp-2 mb-4",children:t.description}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-4 mb-4",children:[(0,s.jsx)("p",{className:"text-sm text-slate-600 mb-1",children:"Valor Total"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-slate-900",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(t.total)}),t.items_count&&t.items_count>0&&(0,s.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:[t.items_count," ",1===t.items_count?"item":"itens"]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-slate-100",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-500",children:[(0,s.jsx)(h.Z,{className:"w-4 h-4"}),(0,s.jsxs)("span",{children:["V\xe1lido at\xe9 ",new Date(t.valid_until).toLocaleDateString("pt-BR")]})]}),"pending"===t.status&&(0,s.jsx)("span",{className:"text-sm font-medium text-blue-600 group-hover:text-blue-700",children:"Ver detalhes â†’"})]})]},t.id)})})]})]})}},5922:function(e,t,r){"use strict";r.d(t,{O:function(){return i}});var s=r(6932),a=r(2601);let n=a.env.NEXT_PUBLIC_SUPABASE_URL,l=a.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,i=(0,s.eI)(n,l)}},function(e){e.O(0,[896,971,938,560],function(){return e(e.s=1700)}),_N_E=e.O()}]);