(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[178],{2898:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var s=a(2265),l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),n=(e,t)=>{let a=(0,s.forwardRef)(({color:a="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:d="",children:c,...m},x)=>(0,s.createElement)("svg",{ref:x,...l,width:n,height:n,stroke:a,strokeWidth:o?24*Number(i)/Number(n):i,className:["lucide",`lucide-${r(e)}`,d].join(" "),...m},[...t.map(([e,t])=>(0,s.createElement)(e,t)),...Array.isArray(c)?c:[c]]));return a.displayName=`${e}`,a}},3067:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(2898).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},7972:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(2898).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},1412:function(e,t,a){Promise.resolve().then(a.bind(a,3195))},3195:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return f}});var s=a(7437),l=a(2265),r=a(4033),n=a(5922),i=a(3067),o=a(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,o.Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);var c=a(7972);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let m=(0,o.Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),x=(0,o.Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),u=(0,o.Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),h=(0,o.Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),p=(0,o.Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),b=(0,o.Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);function f(){let e=(0,r.useRouter)(),[t,a]=(0,l.useState)(!0),[o,f]=(0,l.useState)(!1),[j,v]=(0,l.useState)(null),[g,y]=(0,l.useState)(""),[N,w]=(0,l.useState)(""),[k,S]=(0,l.useState)(""),[M,Z]=(0,l.useState)(""),[C,I]=(0,l.useState)(""),[z,E]=(0,l.useState)(""),[A,O]=(0,l.useState)(!1),[U,_]=(0,l.useState)(!1),[q,H]=(0,l.useState)(!1),[J,L]=(0,l.useState)(null);async function R(){let{data:{user:t}}=await n.O.auth.getUser();t||e.push("/login")}async function V(){try{let{data:{user:e}}=await n.O.auth.getUser();if(!e)return;let{data:t,error:a}=await n.O.from("profiles").select("\n          *,\n          client:clients(name, address, responsible_name)\n        ").eq("id",e.id).single();if(a)throw a;v(t),y(t.full_name||""),w(e.email||""),S(t.phone||"")}catch(e){console.error("Erro ao carregar perfil:",e)}finally{a(!1)}}async function P(){f(!0),L(null);try{let{data:{user:e}}=await n.O.auth.getUser();if(!e)throw Error("Usu\xe1rio n\xe3o autenticado");if(N!==e.email){let{error:e}=await n.O.auth.updateUser({email:N.trim()});if(e)throw e}let{error:t}=await n.O.from("profiles").update({full_name:g.trim(),phone:k.trim()||null}).eq("id",e.id);if(t)throw t;L({type:"success",text:"✅ Perfil atualizado com sucesso!"+(N!==e.email?" Verifique seu novo email para confirmar.":"")}),await V()}catch(e){L({type:"error",text:"Erro ao atualizar perfil: ".concat(e.message)})}finally{f(!1)}}async function Y(){if(L(null),!C||!z){L({type:"error",text:"Preencha a nova senha e confirma\xe7\xe3o"});return}if(C!==z){L({type:"error",text:"As senhas n\xe3o coincidem"});return}if(C.length<6){L({type:"error",text:"A senha deve ter no m\xednimo 6 caracteres"});return}f(!0);try{let{error:e}=await n.O.auth.updateUser({password:C});if(e)throw e;L({type:"success",text:"✅ Senha alterada com sucesso!"}),Z(""),I(""),E("")}catch(e){L({type:"error",text:"Erro ao alterar senha: ".concat(e.message)})}finally{f(!1)}}return((0,l.useEffect)(()=>{R(),V()},[]),t)?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:[(0,s.jsx)("header",{className:"bg-white/80 backdrop-blur-xl border-b border-slate-200/60 sticky top-0 z-50",children:(0,s.jsx)("div",{className:"max-w-4xl mx-auto px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("button",{onClick:()=>e.back(),className:"p-2.5 hover:bg-slate-100 rounded-xl transition-all duration-200",children:(0,s.jsx)(i.Z,{className:"w-5 h-5 text-slate-700"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-xl font-bold text-slate-900",children:"Meu Perfil"}),(0,s.jsx)("p",{className:"text-sm text-slate-500",children:"Gerencie suas informa\xe7\xf5es pessoais"})]})]})})}),(0,s.jsxs)("main",{className:"max-w-4xl mx-auto px-6 py-8",children:[J&&(0,s.jsx)("div",{className:"mb-6 p-4 rounded-xl border-l-4 ".concat("success"===J.type?"bg-emerald-50 border-emerald-500 text-emerald-800":"bg-red-50 border-red-500 text-red-800"),children:(0,s.jsx)("p",{className:"font-medium",children:J.text})}),(null==j?void 0:j.client)&&(0,s.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-sm border border-slate-200/60 p-8 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center",children:(0,s.jsx)(d,{className:"w-6 h-6 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-slate-900",children:"Empresa"}),(0,s.jsx)("p",{className:"text-sm text-slate-500",children:"Informa\xe7\xf5es da sua empresa"})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Nome da Empresa"}),(0,s.jsx)("div",{className:"px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-900",children:j.client.name})]}),j.client.responsible_name&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Respons\xe1vel"}),(0,s.jsx)("div",{className:"px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-900",children:j.client.responsible_name})]}),j.client.address&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Endere\xe7o"}),(0,s.jsx)("div",{className:"px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-900",children:j.client.address})]})]})]}),(0,s.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-sm border border-slate-200/60 p-8 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-600 rounded-xl flex items-center justify-center",children:(0,s.jsx)(c.Z,{className:"w-6 h-6 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-slate-900",children:"Informa\xe7\xf5es Pessoais"}),(0,s.jsx)("p",{className:"text-sm text-slate-500",children:"Atualize seus dados pessoais"})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nome Completo *"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(c.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),(0,s.jsx)("input",{type:"text",value:g,onChange:e=>y(e.target.value),className:"w-full pl-12 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Seu nome completo"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Email *"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(m,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),(0,s.jsx)("input",{type:"email",value:N,onChange:e=>w(e.target.value),className:"w-full pl-12 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"seu@email.com"})]}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Se alterar o email, voc\xea receber\xe1 um link de confirma\xe7\xe3o"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Telefone"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(x,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),(0,s.jsx)("input",{type:"tel",value:k,onChange:e=>S(e.target.value),className:"w-full pl-12 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"(00) 00000-0000"})]})]}),(0,s.jsxs)("button",{onClick:P,disabled:o,className:"w-full group relative px-6 py-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-2xl font-semibold hover:from-blue-700 hover:to-indigo-700 disabled:opacity-50 transition-all duration-300 shadow-lg hover:shadow-2xl overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"}),(0,s.jsx)("div",{className:"relative flex items-center justify-center gap-2",children:o?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),(0,s.jsx)("span",{children:"Salvando..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u,{className:"w-5 h-5"}),(0,s.jsx)("span",{children:"Salvar Altera\xe7\xf5es"})]})})]})]})]}),(0,s.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-sm border border-slate-200/60 p-8",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-500 to-orange-600 rounded-xl flex items-center justify-center",children:(0,s.jsx)(h,{className:"w-6 h-6 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-slate-900",children:"Seguran\xe7a"}),(0,s.jsx)("p",{className:"text-sm text-slate-500",children:"Altere sua senha de acesso"})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nova Senha *"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(h,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),(0,s.jsx)("input",{type:U?"text":"password",value:C,onChange:e=>I(e.target.value),className:"w-full pl-12 pr-12 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"M\xednimo 6 caracteres"}),(0,s.jsx)("button",{type:"button",onClick:()=>_(!U),className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:U?(0,s.jsx)(p,{className:"w-5 h-5"}):(0,s.jsx)(b,{className:"w-5 h-5"})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Confirmar Nova Senha *"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(h,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),(0,s.jsx)("input",{type:q?"text":"password",value:z,onChange:e=>E(e.target.value),className:"w-full pl-12 pr-12 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Digite a senha novamente"}),(0,s.jsx)("button",{type:"button",onClick:()=>H(!q),className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:q?(0,s.jsx)(p,{className:"w-5 h-5"}):(0,s.jsx)(b,{className:"w-5 h-5"})})]})]}),(0,s.jsx)("button",{onClick:Y,disabled:o||!C||!z,className:"w-full px-6 py-4 bg-gradient-to-r from-amber-600 to-orange-600 text-white rounded-2xl font-semibold hover:from-amber-700 hover:to-orange-700 disabled:opacity-50 transition-all duration-300 shadow-lg hover:shadow-2xl",children:o?"Alterando...":"Alterar Senha"})]})]})]})]})}},5922:function(e,t,a){"use strict";a.d(t,{O:function(){return s}});let s=(0,a(6932).eI)("https://xgcpfxzlzretwsjhvbtt.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhnY3BmeHpsenJldHdzamh2YnR0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUyMjgyODEsImV4cCI6MjA4MDgwNDI4MX0.uG-WI56U7TUkkZogpofgbm8VH55RYOHe1y1hQRpUMgc")}},function(e){e.O(0,[896,971,938,560],function(){return e(e.s=1412)}),_N_E=e.O()}]);