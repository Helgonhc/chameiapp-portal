(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[358],{2898:function(e,t,r){"use strict";r.d(t,{Z:function(){return n}});var a=r(2265),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),n=(e,t)=>{let r=(0,a.forwardRef)(({color:r="currentColor",size:n=24,strokeWidth:o=2,absoluteStrokeWidth:i,className:d="",children:c,...u},x)=>(0,a.createElement)("svg",{ref:x,...s,width:n,height:n,stroke:r,strokeWidth:i?24*Number(o)/Number(n):o,className:["lucide",`lucide-${l(e)}`,d].join(" "),...u},[...t.map(([e,t])=>(0,a.createElement)(e,t)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r}},3067:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(2898).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},8203:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(2898).Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},173:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(2898).Z)("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},6141:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,r(2898).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},4947:function(e,t,r){Promise.resolve().then(r.bind(r,7640))},7640:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return u}});var a=r(7437),s=r(2265),l=r(4033),n=r(5922),o=r(173),i=r(3067),d=r(8203),c=r(6141);function u(){let e=(0,l.useRouter)(),[t,r]=(0,s.useState)(!1),[u,x]=(0,s.useState)(!1),[m,b]=(0,s.useState)(""),[h,p]=(0,s.useState)(""),[f,g]=(0,s.useState)(""),[v,j]=(0,s.useState)(""),[y,N]=(0,s.useState)(""),[w,k]=(0,s.useState)("media"),[C,D]=(0,s.useState)("");async function I(){let{data:{user:t}}=await n.O.auth.getUser();t||e.push("/login")}async function S(t){t.preventDefault(),r(!0),D("");try{if(!m||!h)throw Error("Data e hor\xe1rio s\xe3o obrigat\xf3rios");let{data:{user:t}}=await n.O.auth.getUser();if(!t)throw Error("Usu\xe1rio n\xe3o autenticado");let{data:r}=await n.O.from("profiles").select("client_id").eq("id",t.id).single();if(!(null==r?void 0:r.client_id))throw Error("Cliente n\xe3o encontrado");let{error:a}=await n.O.from("appointment_requests").insert({client_id:r.client_id,requested_date:m,requested_time_start:h,requested_time_end:f||null,service_type:v||null,description:y||null,priority:w,status:"pending"});if(a)throw a;x(!0),setTimeout(()=>e.push("/appointments"),2500)}catch(e){D(e.message||"Erro ao criar agendamento")}finally{r(!1)}}return((0,s.useEffect)(()=>{I()},[]),u)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-emerald-50 via-teal-50 to-cyan-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl p-12 max-w-md text-center",children:[(0,a.jsxs)("div",{className:"relative mb-8",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-400 to-teal-400 rounded-full blur-2xl opacity-30 animate-pulse"}),(0,a.jsx)("div",{className:"relative w-24 h-24 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-full flex items-center justify-center mx-auto shadow-2xl",children:(0,a.jsx)(o.Z,{className:"w-14 h-14 text-white"})})]}),(0,a.jsx)("h2",{className:"text-3xl font-bold text-slate-900 mb-3",children:"Agendamento Solicitado!"}),(0,a.jsx)("p",{className:"text-slate-600 mb-6",children:"Sua solicita\xe7\xe3o foi enviada. Aguarde a confirma\xe7\xe3o do t\xe9cnico."}),(0,a.jsx)("div",{className:"bg-emerald-50 border border-emerald-200 rounded-xl p-4",children:(0,a.jsx)("p",{className:"text-sm text-emerald-800 font-medium",children:"âœ“ Voc\xea receber\xe1 uma notifica\xe7\xe3o quando for confirmado"})})]})}):(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:[(0,a.jsx)("header",{className:"bg-white/80 backdrop-blur-xl border-b border-slate-200/60 sticky top-0 z-50",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("button",{onClick:()=>e.back(),className:"p-2.5 hover:bg-slate-100 rounded-xl transition-all",children:(0,a.jsx)(i.Z,{className:"w-5 h-5 text-slate-700"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-xl font-bold text-slate-900",children:"Novo Agendamento"}),(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"Solicite uma visita t\xe9cnica"})]})]})})}),(0,a.jsx)("main",{className:"max-w-4xl mx-auto px-6 py-8",children:(0,a.jsxs)("form",{onSubmit:S,className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-sm border border-slate-200/60 p-8 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-3",children:"Tipo de Servi\xe7o"}),(0,a.jsx)("input",{type:"text",value:v,onChange:e=>j(e.target.value),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Ex: Manuten\xe7\xe3o Preventiva, Instala\xe7\xe3o, Reparo..."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-3",children:"Descri\xe7\xe3o (Opcional)"}),(0,a.jsx)("textarea",{value:y,onChange:e=>N(e.target.value),rows:4,className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all resize-none",placeholder:"Descreva o que precisa ser feito..."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-3",children:"Data Desejada *"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(d.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),(0,a.jsx)("input",{type:"date",value:m,onChange:e=>b(e.target.value),min:new Date().toISOString().split("T")[0],required:!0,className:"w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-3",children:"Hor\xe1rio In\xedcio *"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(c.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),(0,a.jsx)("input",{type:"time",value:h,onChange:e=>p(e.target.value),required:!0,className:"w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-3",children:"Hor\xe1rio Fim (Opcional)"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(c.Z,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),(0,a.jsx)("input",{type:"time",value:f,onChange:e=>g(e.target.value),className:"w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-3",children:"Prioridade"}),(0,a.jsxs)("div",{className:"grid grid-cols-4 gap-3",children:[(0,a.jsxs)("button",{type:"button",onClick:()=>k("baixa"),className:"p-3 rounded-xl border-2 transition-all ".concat("baixa"===w?"border-green-500 bg-green-50":"border-slate-200 hover:border-green-300"),children:[(0,a.jsx)("div",{className:"text-2xl mb-1",children:"\uD83D\uDFE2"}),(0,a.jsx)("div",{className:"text-xs font-bold",children:"Baixa"})]}),(0,a.jsxs)("button",{type:"button",onClick:()=>k("media"),className:"p-3 rounded-xl border-2 transition-all ".concat("media"===w?"border-yellow-500 bg-yellow-50":"border-slate-200 hover:border-yellow-300"),children:[(0,a.jsx)("div",{className:"text-2xl mb-1",children:"\uD83D\uDFE1"}),(0,a.jsx)("div",{className:"text-xs font-bold",children:"M\xe9dia"})]}),(0,a.jsxs)("button",{type:"button",onClick:()=>k("alta"),className:"p-3 rounded-xl border-2 transition-all ".concat("alta"===w?"border-orange-500 bg-orange-50":"border-slate-200 hover:border-orange-300"),children:[(0,a.jsx)("div",{className:"text-2xl mb-1",children:"\uD83D\uDFE0"}),(0,a.jsx)("div",{className:"text-xs font-bold",children:"Alta"})]}),(0,a.jsxs)("button",{type:"button",onClick:()=>k("urgente"),className:"p-3 rounded-xl border-2 transition-all ".concat("urgente"===w?"border-red-500 bg-red-50":"border-slate-200 hover:border-red-300"),children:[(0,a.jsx)("div",{className:"text-2xl mb-1",children:"\uD83D\uDD34"}),(0,a.jsx)("div",{className:"text-xs font-bold",children:"Urgente"})]})]})]}),C&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 text-red-700",children:C}),(0,a.jsx)("button",{type:"submit",disabled:t,className:"w-full py-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-2xl font-bold text-lg hover:from-blue-700 hover:to-indigo-700 disabled:opacity-50 transition-all shadow-lg hover:shadow-xl",children:t?"Enviando...":"Solicitar Agendamento"})]})})]})}},5922:function(e,t,r){"use strict";r.d(t,{O:function(){return a}});let a=(0,r(6932).eI)("https://xgcpfxzlzretwsjhvbtt.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhnY3BmeHpsenJldHdzamh2YnR0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUyMjgyODEsImV4cCI6MjA4MDgwNDI4MX0.uG-WI56U7TUkkZogpofgbm8VH55RYOHe1y1hQRpUMgc")}},function(e){e.O(0,[896,971,938,560],function(){return e(e.s=4947)}),_N_E=e.O()}]);