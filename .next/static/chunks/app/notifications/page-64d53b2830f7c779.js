(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[193],{2898:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var s=a(2265),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),n=(e,t)=>{let a=(0,s.forwardRef)(({color:a="currentColor",size:n=24,strokeWidth:l=2,absoluteStrokeWidth:o,className:c="",children:d,...u},h)=>(0,s.createElement)("svg",{ref:h,...r,width:n,height:n,stroke:a,strokeWidth:o?24*Number(l)/Number(n):l,className:["lucide",`lucide-${i(e)}`,c].join(" "),...u},[...t.map(([e,t])=>(0,s.createElement)(e,t)),...Array.isArray(d)?d:[d]]));return a.displayName=`${e}`,a}},1981:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(2898).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},3067:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(2898).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},3021:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(2898).Z)("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]])},1298:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(2898).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},6637:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(2898).Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},1138:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(2898).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},5380:function(e,t,a){Promise.resolve().then(a.bind(a,1248))},1248:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return b}});var s=a(7437),r=a(2265),i=a(4033),n=a(5922),l=a(6637),o=a(1981),c=a(2898);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let d=(0,c.Z)("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);var u=a(1298);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let h=(0,c.Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),x=(0,c.Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);var m=a(3021),f=a(3067),p=a(1138);function b(){let e=(0,i.useRouter)(),[t,a]=(0,r.useState)(!0),[c,b]=(0,r.useState)([]),[y,g]=(0,r.useState)("all");async function w(){let{data:{user:t}}=await n.O.auth.getUser();t||e.push("/login")}async function N(){try{let{data:{user:e}}=await n.O.auth.getUser();if(!e)return;let{data:t,error:a}=await n.O.from("notifications").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(50);if(a)throw a;b(t||[])}catch(e){console.error("Erro ao carregar notifica\xe7\xf5es:",e)}finally{a(!1)}}async function j(e){try{let{error:t}=await n.O.from("notifications").update({is_read:!0,read_at:new Date().toISOString()}).eq("id",e);if(t)throw t;await N()}catch(e){console.error("Erro ao marcar como lida:",e)}}async function k(){try{let{data:{user:e}}=await n.O.auth.getUser();if(!e)return;let{error:t}=await n.O.from("notifications").update({is_read:!0,read_at:new Date().toISOString()}).eq("user_id",e.id).eq("is_read",!1);if(t)throw t;await N()}catch(e){console.error("Erro ao marcar todas como lidas:",e)}}async function v(){if(confirm("Deseja excluir todas as notifica\xe7\xf5es lidas? Esta a\xe7\xe3o n\xe3o pode ser desfeita."))try{let{data:{user:e}}=await n.O.auth.getUser();if(!e)return;let{error:t}=await n.O.from("notifications").delete().eq("user_id",e.id).eq("is_read",!0);if(t)throw t;await N()}catch(e){console.error("Erro ao deletar notifica\xe7\xf5es:",e),alert("Erro ao excluir notifica\xe7\xf5es")}}async function _(e){try{let{error:t}=await n.O.from("notifications").delete().eq("id",e);if(t)throw t;await N()}catch(e){console.error("Erro ao deletar notifica\xe7\xe3o:",e)}}(0,r.useEffect)(()=>{w(),N()},[]);let Z="unread"===y?c.filter(e=>!e.is_read):c,q=c.filter(e=>!e.is_read).length;return t?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:[(0,s.jsx)("header",{className:"bg-white/80 backdrop-blur-xl border-b border-slate-200/60 sticky top-0 z-50",children:(0,s.jsx)("div",{className:"max-w-4xl mx-auto px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("button",{onClick:()=>e.back(),className:"p-2.5 hover:bg-slate-100 rounded-xl transition-all duration-200",children:(0,s.jsx)(f.Z,{className:"w-5 h-5 text-slate-700"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-xl font-bold text-slate-900",children:"Notifica\xe7\xf5es"}),(0,s.jsx)("p",{className:"text-sm text-slate-500",children:q>0?"".concat(q," n\xe3o lida").concat(q>1?"s":""):"Tudo em dia"})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[q>0&&(0,s.jsxs)("button",{onClick:k,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-xl font-medium hover:bg-blue-700 transition-all",children:[(0,s.jsx)(d,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Marcar todas como lidas"}),(0,s.jsx)("span",{className:"sm:hidden",children:"Marcar"})]}),c.filter(e=>e.is_read).length>0&&(0,s.jsxs)("button",{onClick:v,className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-xl font-medium hover:bg-red-700 transition-all",children:[(0,s.jsx)(p.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"hidden sm:inline",children:"Limpar lidas"}),(0,s.jsx)("span",{className:"sm:hidden",children:"Limpar"})]})]})]})})}),(0,s.jsxs)("main",{className:"max-w-4xl mx-auto px-6 py-8",children:[(0,s.jsxs)("div",{className:"flex gap-3 mb-6",children:[(0,s.jsxs)("button",{onClick:()=>g("all"),className:"px-4 py-2 rounded-xl font-medium transition-all ".concat("all"===y?"bg-white text-blue-600 shadow-sm border border-blue-200":"bg-white/60 text-slate-600 hover:bg-white"),children:["Todas (",c.length,")"]}),(0,s.jsxs)("button",{onClick:()=>g("unread"),className:"px-4 py-2 rounded-xl font-medium transition-all ".concat("unread"===y?"bg-white text-blue-600 shadow-sm border border-blue-200":"bg-white/60 text-slate-600 hover:bg-white"),children:["N\xe3o lidas (",q,")"]})]}),(0,s.jsx)("div",{className:"space-y-3",children:0===Z.length?(0,s.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-sm border border-slate-200/60 p-16 text-center",children:[(0,s.jsx)(m.Z,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-lg font-medium text-slate-700 mb-2",children:"unread"===y?"Nenhuma notifica\xe7\xe3o n\xe3o lida":"Nenhuma notifica\xe7\xe3o"}),(0,s.jsx)("p",{className:"text-sm text-slate-500",children:"unread"===y?"Voc\xea est\xe1 em dia!":"Quando houver novidades, elas aparecer\xe3o aqui"})]}):Z.map(t=>{var a;return(0,s.jsx)("div",{className:"group bg-white/80 backdrop-blur-xl rounded-2xl shadow-sm border transition-all duration-300 cursor-pointer overflow-hidden ".concat(t.is_read?"border-slate-200/60 hover:border-slate-300":"border-blue-300 hover:border-blue-400 bg-blue-50/30"),onClick:()=>{j(t.id),t.order_id?e.push("/order/".concat(t.order_id)):t.quote_id&&e.push("/quotes/".concat(t.quote_id))},children:(0,s.jsx)("div",{className:"p-5",children:(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)("div",{className:"flex-shrink-0 w-12 h-12 rounded-xl flex items-center justify-center ".concat({new_order:"bg-blue-100 text-blue-600",order_updated:"bg-purple-100 text-purple-600",order_completed:"bg-green-100 text-green-600",quote_created:"bg-amber-100 text-amber-600",quote_approved:"bg-emerald-100 text-emerald-600",quote_rejected:"bg-red-100 text-red-600",message:"bg-cyan-100 text-cyan-600",system:"bg-slate-100 text-slate-600"}[t.type]||"bg-gray-100 text-gray-600"),children:(a=t.type,({new_order:(0,s.jsx)(l.Z,{className:"w-5 h-5"}),order_updated:(0,s.jsx)(o.Z,{className:"w-5 h-5"}),order_completed:(0,s.jsx)(d,{className:"w-5 h-5"}),quote_created:(0,s.jsx)(u.Z,{className:"w-5 h-5"}),quote_approved:(0,s.jsx)(h,{className:"w-5 h-5"}),quote_rejected:(0,s.jsx)(o.Z,{className:"w-5 h-5"}),message:(0,s.jsx)(x,{className:"w-5 h-5"}),system:(0,s.jsx)(m.Z,{className:"w-5 h-5"})})[a]||(0,s.jsx)(m.Z,{className:"w-5 h-5"}))}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-3 mb-1",children:[(0,s.jsx)("h3",{className:"font-semibold text-slate-900 text-base",children:t.title}),!t.is_read&&(0,s.jsx)("div",{className:"flex-shrink-0 w-2 h-2 bg-blue-600 rounded-full"})]}),(0,s.jsx)("p",{className:"text-sm text-slate-600 mb-2 line-clamp-2",children:t.body}),(0,s.jsx)("p",{className:"text-xs text-slate-500",children:new Date(t.created_at).toLocaleString("pt-BR",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"})})]}),(0,s.jsxs)("div",{className:"flex-shrink-0 flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[!t.is_read&&(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),j(t.id)},className:"p-2 hover:bg-blue-100 rounded-lg transition-colors",title:"Marcar como lida",children:(0,s.jsx)(h,{className:"w-4 h-4 text-blue-600"})}),(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),_(t.id)},className:"p-2 hover:bg-red-100 rounded-lg transition-colors",title:"Excluir",children:(0,s.jsx)(p.Z,{className:"w-4 h-4 text-red-600"})})]})]})})},t.id)})})]})]})}},5922:function(e,t,a){"use strict";a.d(t,{O:function(){return l}});var s=a(6932),r=a(2601);let i=r.env.NEXT_PUBLIC_SUPABASE_URL,n=r.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,l=(0,s.eI)(i,n)}},function(e){e.O(0,[896,971,938,560],function(){return e(e.s=5380)}),_N_E=e.O()}]);