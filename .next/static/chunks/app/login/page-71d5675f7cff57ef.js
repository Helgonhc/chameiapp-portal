(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{4584:function(e,s,t){Promise.resolve().then(t.bind(t,4338))},4338:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return c}});var a=t(7437),r=t(2265),l=t(4033),n=t(5922),o=t(6691),i=t.n(o);function c(){let e=(0,l.useRouter)(),[s,t]=(0,r.useState)(""),[o,c]=(0,r.useState)(""),[d,m]=(0,r.useState)(!1),[u,x]=(0,r.useState)(""),[p,g]=(0,r.useState)(null),[b,h]=(0,r.useState)(!0);async function f(){try{let{data:e,error:s}=await n.O.from("clients").select("name, company_name, logo_url, primary_color, portal_welcome_message").eq("is_active",!0).eq("portal_enabled",!0).limit(1).single();s?(console.error("Erro ao carregar branding:",s),g({name:"Aec Servi\xe7os Especializados",company_name:"Aec Servi\xe7os Especializados",logo_url:"/logos/".concat("client-logo.png"),primary_color:"#".concat("9333ea"),portal_welcome_message:null})):g(e)}catch(e){console.error("Erro ao carregar branding:",e)}finally{h(!1)}}async function y(t){t.preventDefault(),m(!0),x("");try{let{data:t,error:a}=await n.O.auth.signInWithPassword({email:s,password:o});if(a)throw a;let{data:r}=await n.O.from("profiles").select("role").eq("id",t.user.id).single();if((null==r?void 0:r.role)!=="client")throw await n.O.auth.signOut(),Error("Acesso negado. Este portal \xe9 apenas para clientes.");e.push("/dashboard")}catch(e){x(e.message)}finally{m(!1)}}return((0,r.useEffect)(()=>{f()},[]),b)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,a.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100 px-4 py-8",children:[(0,a.jsx)("div",{className:"max-w-md w-full",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-6",children:[(0,a.jsxs)("div",{className:"text-center mb-6",children:[(0,a.jsxs)("div",{className:"mb-3",children:[(null==p?void 0:p.logo_url)&&(0,a.jsx)("div",{className:"relative w-32 h-32 mx-auto mb-3",children:(0,a.jsx)(i(),{src:p.logo_url,alt:"Logo ".concat(p.name),fill:!0,className:"object-contain",priority:!0})}),(0,a.jsx)("h1",{className:"text-lg font-bold text-gray-900",children:"Bem-vindo!"}),(0,a.jsx)("p",{className:"text-gray-600 text-sm mt-1 leading-relaxed",children:(null==p?void 0:p.portal_welcome_message)||"Portal de Chamados da ".concat((null==p?void 0:p.name)||"Empresa")}),(0,a.jsx)("p",{className:"text-gray-500 text-xs mt-1",children:"Acesse sua conta para continuar"})]}),(0,a.jsx)("div",{className:"mt-4 pt-3 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 text-sm",children:[(0,a.jsx)("span",{className:"text-gray-500",children:"Powered by"}),(0,a.jsx)("span",{className:"font-bold bg-gradient-to-r from-blue-600 to-blue-800 bg-clip-text text-transparent",children:"ChameiApp"})]})})]}),(0,a.jsxs)("form",{onSubmit:y,className:"space-y-4",children:[u&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:u}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,a.jsx)("input",{id:"email",type:"email",value:s,onChange:e=>t(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"seu@email.com"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Senha"}),(0,a.jsx)("input",{id:"password",type:"password",value:o,onChange:e=>c(e.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm",placeholder:"••••••••"})]}),(0,a.jsx)("button",{type:"submit",disabled:d,className:"w-full bg-blue-600 text-white py-2.5 px-4 rounded-lg font-medium hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm",children:d?"Entrando...":"Entrar"})]}),(0,a.jsxs)("div",{className:"mt-4 text-center text-xs text-gray-600",children:[(0,a.jsx)("span",{children:"N\xe3o tem uma conta? "}),(0,a.jsx)("button",{onClick:()=>e.push("/register"),className:"text-blue-600 hover:text-blue-700 font-medium",children:"Criar conta"})]})]})}),(0,a.jsxs)("div",{className:"mt-6 text-center",children:[(0,a.jsxs)("p",{className:"text-xs text-gray-600",children:["\xa9 ",new Date().getFullYear()," ChameiApp. Todos os direitos reservados."]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Desenvolvido por ",(0,a.jsx)("span",{className:"font-semibold text-gray-700",children:"Helgon Henrique"})]})]})]})}},5922:function(e,s,t){"use strict";t.d(s,{O:function(){return a}});let a=(0,t(6932).eI)("https://xgcpfxzlzretwsjhvbtt.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InhnY3BmeHpsenJldHdzamh2YnR0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUyMjgyODEsImV4cCI6MjA4MDgwNDI4MX0.uG-WI56U7TUkkZogpofgbm8VH55RYOHe1y1hQRpUMgc")}},function(e){e.O(0,[896,691,971,938,560],function(){return e(e.s=4584)}),_N_E=e.O()}]);