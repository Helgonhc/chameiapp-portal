(()=>{var e={};e.id=178,e.ids=[178],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},1490:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>c,routeModule:()=>u,tree:()=>d});var a=s(482),r=s(9108),l=s(2563),i=s.n(l),o=s(8300),n={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);s.d(t,n);let d=["",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,8654)),"D:\\Projeto\\chameiapp\\client-portal\\app\\profile\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,2917)),"D:\\Projeto\\chameiapp\\client-portal\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\Projeto\\chameiapp\\client-portal\\app\\profile\\page.tsx"],x="/profile/page",m={require:s,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/profile/page",pathname:"/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7166:(e,t,s)=>{Promise.resolve().then(s.bind(s,2851))},2851:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var a=s(2295),r=s(3729),l=s(2254),i=s(2829),o=s(8822),n=s(9895),d=s(9224);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,d.Z)("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);var x=s(473),m=s(1700),u=s(1206);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let h=(0,d.Z)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),p=(0,d.Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),b=(0,d.Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),f=(0,d.Z)("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),g=(0,d.Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var v=s(9170);function j(){let e=(0,l.useRouter)(),[t,s]=(0,r.useState)(!0),[d,j]=(0,r.useState)(!1),[y,w]=(0,r.useState)(null),[N,k]=(0,r.useState)(""),[P,S]=(0,r.useState)(""),[Z,M]=(0,r.useState)(""),[_,q]=(0,r.useState)(""),[C,A]=(0,r.useState)(""),[E,z]=(0,r.useState)(""),[O,U]=(0,r.useState)(!1),[D,G]=(0,r.useState)(!1),[$,V]=(0,r.useState)(!1),[H,R]=(0,r.useState)(null);async function F(){let{data:{user:t}}=await i.O.auth.getUser();t||e.push("/login")}async function I(){try{let{data:{user:e}}=await i.O.auth.getUser();if(!e)return;let{data:t,error:s}=await i.O.from("profiles").select(`
          *,
          client:clients(name, address, responsible_name)
        `).eq("id",e.id).single();if(s)throw s;w(t),k(t.full_name||""),S(e.email||""),M(t.phone||"")}catch(e){console.error("Erro ao carregar perfil:",e)}finally{s(!1)}}async function L(){j(!0),R(null);try{let{data:{user:e}}=await i.O.auth.getUser();if(!e)throw Error("Usu\xe1rio n\xe3o autenticado");if(P!==e.email){let{error:e}=await i.O.auth.updateUser({email:P.trim()});if(e)throw e}let{error:t}=await i.O.from("profiles").update({full_name:N.trim(),phone:Z.trim()||null}).eq("id",e.id);if(t)throw t;R({type:"success",text:"✅ Perfil atualizado com sucesso!"+(P!==e.email?" Verifique seu novo email para confirmar.":"")}),await I()}catch(e){R({type:"error",text:`Erro ao atualizar perfil: ${e.message}`})}finally{j(!1)}}async function T(){if(R(null),!C||!E){R({type:"error",text:"Preencha a nova senha e confirma\xe7\xe3o"});return}if(C!==E){R({type:"error",text:"As senhas n\xe3o coincidem"});return}if(C.length<6){R({type:"error",text:"A senha deve ter no m\xednimo 6 caracteres"});return}j(!0);try{let{error:e}=await i.O.auth.updateUser({password:C});if(e)throw e;R({type:"success",text:"✅ Senha alterada com sucesso!"}),q(""),A(""),z("")}catch(e){R({type:"error",text:`Erro ao alterar senha: ${e.message}`})}finally{j(!1)}}return((0,r.useEffect)(()=>{F(),I()},[]),t)?a.jsx(v.Z,{children:a.jsx("div",{className:"flex items-center justify-center h-full bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"relative",children:[a.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-indigo-200 border-t-indigo-600 mx-auto mb-4"}),a.jsx(o.Z,{className:"w-6 h-6 text-indigo-600 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"})]}),a.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Carregando perfil..."})]})})}):a.jsx(v.Z,{children:(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:[(0,a.jsxs)("div",{className:"relative overflow-hidden bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 px-8 py-12",children:[a.jsx("div",{className:"absolute inset-0 bg-grid-white/10"}),a.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-white/10 rounded-full blur-3xl"}),a.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-pink-500/20 rounded-full blur-3xl"}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"p-2 bg-white/20 backdrop-blur-xl rounded-lg",children:a.jsx(o.Z,{className:"w-6 h-6 text-white"})}),a.jsx("h1",{className:"text-4xl font-bold text-white",children:"Meu Perfil"})]}),a.jsx("p",{className:"text-indigo-100 text-lg",children:"Gerencie suas informa\xe7\xf5es e configura\xe7\xf5es"})]})]}),(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-6 -mt-8 pb-8",children:[H&&a.jsx("div",{className:`mb-6 p-5 rounded-2xl border-l-4 shadow-lg backdrop-blur-xl ${"success"===H.type?"bg-emerald-50/80 border-emerald-500 text-emerald-800":"bg-red-50/80 border-red-500 text-red-800"}`,children:(0,a.jsxs)("p",{className:"font-semibold flex items-center gap-2",children:["success"===H.type?"✅":"❌",H.text]})}),(0,a.jsxs)("div",{className:"group relative bg-white/80 backdrop-blur-xl rounded-2xl shadow-lg border border-slate-200/60 p-8 mb-6 overflow-hidden hover:shadow-2xl transition-all duration-500",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/5 to-pink-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),a.jsx("div",{className:"relative flex items-center justify-between mb-6",children:(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500 to-pink-600 rounded-xl blur opacity-50"}),a.jsx("div",{className:"relative w-14 h-14 bg-gradient-to-br from-purple-500 to-pink-600 rounded-xl flex items-center justify-center shadow-lg",children:a.jsx(n.Z,{className:"w-7 h-7 text-white"})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{className:"text-2xl font-bold text-slate-900 flex items-center gap-2",children:["Usu\xe1rios do Portal",a.jsx(c,{className:"w-5 h-5 text-yellow-500"})]}),a.jsx("p",{className:"text-sm text-slate-500",children:"Gerencie at\xe9 2 usu\xe1rios da sua empresa"})]})]})}),(0,a.jsxs)("button",{onClick:()=>e.push("/profile/users"),className:"relative w-full group/btn px-6 py-5 bg-gradient-to-r from-purple-600 via-pink-600 to-rose-600 text-white rounded-2xl font-bold text-lg hover:shadow-2xl hover:shadow-purple-500/50 transition-all duration-500 overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 translate-x-[-100%] group-hover/btn:translate-x-[100%] transition-transform duration-1000"}),(0,a.jsxs)("div",{className:"relative flex items-center justify-center gap-3",children:[a.jsx(n.Z,{className:"w-6 h-6 group-hover/btn:scale-110 transition-transform"}),a.jsx("span",{children:"\uD83D\uDC65 Gerenciar Usu\xe1rios"}),a.jsx(x.Z,{className:"w-5 h-5 group-hover/btn:rotate-12 transition-transform"})]})]})]}),y?.client&&(0,a.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-sm border border-slate-200/60 p-8 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center",children:a.jsx(m.Z,{className:"w-6 h-6 text-white"})}),(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Empresa"}),a.jsx("p",{className:"text-sm text-slate-500",children:"Informa\xe7\xf5es da sua empresa"})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Nome da Empresa"}),a.jsx("div",{className:"px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-900",children:y.client.name})]}),y.client.responsible_name&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Respons\xe1vel"}),a.jsx("div",{className:"px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-900",children:y.client.responsible_name})]}),y.client.address&&(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Endere\xe7o"}),a.jsx("div",{className:"px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-slate-900",children:y.client.address})]})]})]}),(0,a.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-sm border border-slate-200/60 p-8 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-600 rounded-xl flex items-center justify-center",children:a.jsx(o.Z,{className:"w-6 h-6 text-white"})}),(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Informa\xe7\xf5es Pessoais"}),a.jsx("p",{className:"text-sm text-slate-500",children:"Atualize seus dados pessoais"})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nome Completo *"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx(o.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),a.jsx("input",{type:"text",value:N,onChange:e=>k(e.target.value),className:"w-full pl-12 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Seu nome completo"})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Email *"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx(u.Z,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),a.jsx("input",{type:"email",value:P,onChange:e=>S(e.target.value),className:"w-full pl-12 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"seu@email.com"})]}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Se alterar o email, voc\xea receber\xe1 um link de confirma\xe7\xe3o"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Telefone"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx(h,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),a.jsx("input",{type:"tel",value:Z,onChange:e=>M(e.target.value),className:"w-full pl-12 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"(00) 00000-0000"})]})]}),(0,a.jsxs)("button",{onClick:L,disabled:d,className:"w-full group relative px-6 py-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-2xl font-semibold hover:from-blue-700 hover:to-indigo-700 disabled:opacity-50 transition-all duration-300 shadow-lg hover:shadow-2xl overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"}),a.jsx("div",{className:"relative flex items-center justify-center gap-2",children:d?(0,a.jsxs)(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),a.jsx("span",{children:"Salvando..."})]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(p,{className:"w-5 h-5"}),a.jsx("span",{children:"Salvar Altera\xe7\xf5es"})]})})]})]})]}),(0,a.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-sm border border-slate-200/60 p-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-amber-500 to-orange-600 rounded-xl flex items-center justify-center",children:a.jsx(b,{className:"w-6 h-6 text-white"})}),(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Seguran\xe7a"}),a.jsx("p",{className:"text-sm text-slate-500",children:"Altere sua senha de acesso"})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Nova Senha *"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx(b,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),a.jsx("input",{type:D?"text":"password",value:C,onChange:e=>A(e.target.value),className:"w-full pl-12 pr-12 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"M\xednimo 6 caracteres"}),a.jsx("button",{type:"button",onClick:()=>G(!D),className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:D?a.jsx(f,{className:"w-5 h-5"}):a.jsx(g,{className:"w-5 h-5"})})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Confirmar Nova Senha *"}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx(b,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),a.jsx("input",{type:$?"text":"password",value:E,onChange:e=>z(e.target.value),className:"w-full pl-12 pr-12 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Digite a senha novamente"}),a.jsx("button",{type:"button",onClick:()=>V(!$),className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600",children:$?a.jsx(f,{className:"w-5 h-5"}):a.jsx(g,{className:"w-5 h-5"})})]})]}),a.jsx("button",{onClick:T,disabled:d||!C||!E,className:"w-full px-6 py-4 bg-gradient-to-r from-amber-600 to-orange-600 text-white rounded-2xl font-semibold hover:from-amber-700 hover:to-orange-700 disabled:opacity-50 transition-all duration-300 shadow-lg hover:shadow-2xl",children:d?"Alterando...":"Alterar Senha"})]})]})]})]})})}},1700:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(9224).Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},1206:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(9224).Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},9895:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(9224).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},8654:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>l,__esModule:()=>r,default:()=>i});let a=(0,s(6843).createProxy)(String.raw`D:\Projeto\chameiapp\client-portal\app\profile\page.tsx`),{__esModule:r,$$typeof:l}=a,i=a.default}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[869,837,159],()=>s(1490));module.exports=a})();