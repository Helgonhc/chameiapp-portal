(()=>{var e={};e.id=626,e.ids=[626],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},19289:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>o.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d});var r=s(50482),a=s(69108),l=s(62563),o=s.n(l),i=s(68300),n={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>i[e]);s.d(t,n);let d=["",{children:["login",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,43015)),"D:\\Projeto\\chameiapp\\client-portal\\app\\login\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,82917)),"D:\\Projeto\\chameiapp\\client-portal\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\Projeto\\chameiapp\\client-portal\\app\\login\\page.tsx"],u="/login/page",m={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/login/page",pathname:"/login",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},92593:()=>{},6009:(e,t,s)=>{Promise.resolve().then(s.bind(s,89928))},65901:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2583,23)),Promise.resolve().then(s.t.bind(s,26840,23)),Promise.resolve().then(s.t.bind(s,38771,23)),Promise.resolve().then(s.t.bind(s,13225,23)),Promise.resolve().then(s.t.bind(s,9295,23)),Promise.resolve().then(s.t.bind(s,43982,23))},89928:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s(95344),a=s(3729),l=s(22254),o=s(72829),i=s(41223),n=s.n(i);function d(){let e=(0,l.useRouter)(),[t,s]=(0,a.useState)(""),[i,d]=(0,a.useState)(""),[c,u]=(0,a.useState)(!1),[m,x]=(0,a.useState)(""),[p,b]=(0,a.useState)(""),[h,g]=(0,a.useState)(!1),[f,v]=(0,a.useState)(""),[j,N]=(0,a.useState)(!1),[_,w]=(0,a.useState)(null),[y,P]=(0,a.useState)(!0);async function E(){try{let{data:e,error:t}=await o.O.from("clients").select("name, company_name, logo_url, primary_color, portal_welcome_message").eq("is_active",!0).eq("portal_enabled",!0).limit(1).single();t?(console.error("Erro ao carregar branding:",t),w({name:process.env.NEXT_PUBLIC_CLIENT_NAME||"Portal do Cliente",company_name:process.env.NEXT_PUBLIC_CLIENT_NAME||"Portal do Cliente",logo_url:`/logos/${process.env.NEXT_PUBLIC_CLIENT_LOGO||"client-logo.png"}`,primary_color:`#${process.env.NEXT_PUBLIC_CLIENT_COLOR||"0066cc"}`,portal_welcome_message:null})):w(e)}catch(e){console.error("Erro ao carregar branding:",e)}finally{P(!1)}}async function C(s){s.preventDefault(),u(!0),x("");try{let{data:s,error:r}=await o.O.auth.signInWithPassword({email:t,password:i});if(r)throw r;let{data:a}=await o.O.from("profiles").select("role, client_id, is_active").eq("id",s.user.id).single();if(a?.role!=="client")throw await o.O.auth.signOut(),Error("Acesso negado. Este portal \xe9 apenas para clientes.");if(!1===a.is_active)throw await o.O.auth.signOut(),Error("Sua conta est\xe1 desativada. Entre em contato com o suporte.");if(a.client_id){let{data:e}=await o.O.from("clients").select("portal_blocked, portal_blocked_reason").eq("id",a.client_id).single();if(e?.portal_blocked){await o.O.auth.signOut();let t=e.portal_blocked_reason||"Seu acesso ao portal foi bloqueado.";throw Error(`ðŸ”’ Acesso Bloqueado

${t}

Entre em contato com o suporte para mais informa\xe7\xf5es.`)}}e.push("/dashboard")}catch(e){x(e.message)}finally{u(!1)}}async function q(e){e.preventDefault(),N(!0),x(""),b("");try{let{error:e}=await o.O.auth.resetPasswordForEmail(f,{redirectTo:`${window.location.origin}/reset-password`});if(e)throw e;b("âœ… Email de redefini\xe7\xe3o enviado! Verifique sua caixa de entrada."),v(""),setTimeout(()=>{g(!1),b("")},3e3)}catch(e){x(e.message)}finally{N(!1)}}return((0,a.useEffect)(()=>{E()},[]),y)?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-blue-100",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,r.jsxs)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 px-4 py-8 relative overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-blue-400/20 rounded-full blur-3xl"}),r.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-indigo-400/20 rounded-full blur-3xl"}),r.jsx("div",{className:"max-w-md w-full relative z-10",children:(0,r.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-3xl shadow-2xl p-8 border border-slate-200/60",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsxs)("div",{className:"mb-6",children:[_?.logo_url&&(0,r.jsxs)("div",{className:"relative w-32 h-32 mx-auto mb-4",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500 to-indigo-500 rounded-full blur opacity-20"}),r.jsx(n(),{src:_.logo_url,alt:`Logo ${_.name}`,fill:!0,className:"object-contain relative z-10",priority:!0})]}),r.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Bem-vindo de volta!"}),r.jsx("p",{className:"text-slate-600 text-sm leading-relaxed",children:_?.portal_welcome_message||`Portal de Chamados da ${_?.name||"Empresa"}`})]}),r.jsx("div",{className:"pt-4 border-t border-slate-200",children:(0,r.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[r.jsx("span",{className:"text-xs text-slate-500",children:"Powered by"}),r.jsx("span",{className:"text-sm font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:"ChameiApp"})]})})]}),h?(0,r.jsxs)("form",{onSubmit:q,className:"space-y-5",children:[m&&r.jsx("div",{className:"bg-red-50/80 backdrop-blur-xl border-l-4 border-red-500 text-red-700 px-4 py-3 rounded-xl",children:r.jsx("p",{className:"text-sm font-medium",children:m})}),p&&r.jsx("div",{className:"bg-green-50/80 backdrop-blur-xl border-l-4 border-green-500 text-green-700 px-4 py-3 rounded-xl",children:r.jsx("p",{className:"text-sm font-medium",children:p})}),(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"Redefinir Senha"}),r.jsx("p",{className:"text-sm text-slate-600 mb-4",children:"Digite seu email e enviaremos um link para redefinir sua senha."})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"reset-email",className:"block text-sm font-semibold text-slate-700 mb-2",children:"Email"}),r.jsx("input",{id:"reset-email",type:"email",value:f,onChange:e=>v(e.target.value),required:!0,className:"w-full px-4 py-3 bg-slate-50 border-2 border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"seu@email.com"})]}),(0,r.jsxs)("div",{className:"flex gap-3",children:[r.jsx("button",{type:"button",onClick:()=>{g(!1),x(""),b(""),v("")},className:"flex-1 bg-slate-200 text-slate-700 py-3 px-4 rounded-xl font-semibold hover:bg-slate-300 transition-all",children:"Voltar"}),r.jsx("button",{type:"submit",disabled:j,className:"flex-1 bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-3 px-4 rounded-xl font-semibold hover:from-blue-700 hover:to-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl",children:j?"Enviando...":"Enviar Link"})]})]}):(0,r.jsxs)("form",{onSubmit:C,className:"space-y-5",children:[m&&r.jsx("div",{className:"bg-red-50/80 backdrop-blur-xl border-l-4 border-red-500 text-red-700 px-4 py-3 rounded-xl",children:r.jsx("p",{className:"text-sm font-medium whitespace-pre-line",children:m})}),(0,r.jsxs)("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-slate-700 mb-2",children:"Email"}),r.jsx("input",{id:"email",type:"email",value:t,onChange:e=>s(e.target.value),required:!0,className:"w-full px-4 py-3 bg-slate-50 border-2 border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"seu@email.com"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-slate-700",children:"Senha"}),r.jsx("button",{type:"button",onClick:()=>g(!0),className:"text-xs text-blue-600 hover:text-blue-700 font-semibold hover:underline transition-all",children:"Esqueci minha senha"})]}),r.jsx("input",{id:"password",type:"password",value:i,onChange:e=>d(e.target.value),required:!0,className:"w-full px-4 py-3 bg-slate-50 border-2 border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"})]}),(0,r.jsxs)("button",{type:"submit",disabled:c,className:"group relative w-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white py-4 px-4 rounded-xl font-bold hover:from-blue-700 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow-lg hover:shadow-xl overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"}),r.jsx("span",{className:"relative",children:c?"Entrando...":"Entrar no Portal"})]})]}),!h&&r.jsx("div",{className:"mt-6 text-center",children:(0,r.jsxs)("p",{className:"text-sm text-slate-600",children:["N\xe3o tem uma conta?"," ",r.jsx("button",{onClick:()=>e.push("/register"),className:"text-blue-600 hover:text-blue-700 font-semibold hover:underline transition-all",children:"Criar conta"})]})})]})}),(0,r.jsxs)("div",{className:"mt-8 text-center relative z-10",children:[(0,r.jsxs)("p",{className:"text-xs text-slate-600",children:["\xa9 ",new Date().getFullYear()," ChameiApp. Todos os direitos reservados."]}),(0,r.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:["Desenvolvido por ",r.jsx("span",{className:"font-semibold text-slate-700",children:"Helgon Henrique"})]})]})]})}},72829:(e,t,s)=>{"use strict";s.d(t,{O:()=>o});var r=s(47727);let a=process.env.NEXT_PUBLIC_SUPABASE_URL,l=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,o=(0,r.eI)(a,l)},82917:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i,metadata:()=>o});var r=s(25036),a=s(80265),l=s.n(a);s(67272);let o={title:"Portal do Cliente",description:"Acompanhe seus chamados e servi\xe7os"};function i({children:e}){return r.jsx("html",{lang:"pt-BR",children:r.jsx("body",{className:l().className,children:e})})}},43015:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>l,__esModule:()=>a,default:()=>o});let r=(0,s(86843).createProxy)(String.raw`D:\Projeto\chameiapp\client-portal\app\login\page.tsx`),{__esModule:a,$$typeof:l}=r,o=r.default},67272:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[869,837,223],()=>s(19289));module.exports=r})();