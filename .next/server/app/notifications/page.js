(()=>{var e={};e.id=193,e.ids=[193],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},2857:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>o.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>c,routeModule:()=>h,tree:()=>d});var s=a(482),r=a(9108),i=a(2563),o=a.n(i),l=a(8300),n={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>l[e]);a.d(t,n);let d=["",{children:["notifications",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,7125)),"D:\\Projeto\\chameiapp\\client-portal\\app\\notifications\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,2917)),"D:\\Projeto\\chameiapp\\client-portal\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9361,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\Projeto\\chameiapp\\client-portal\\app\\notifications\\page.tsx"],x="/notifications/page",u={require:a,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/notifications/page",pathname:"/notifications",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},7919:(e,t,a)=>{Promise.resolve().then(a.bind(a,6002))},6002:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var s=a(2295),r=a(3729),i=a(2254),o=a(2829),l=a(7121),n=a(6138),d=a(9224);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,d.Z)("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]);var x=a(8411);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let u=(0,d.Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),h=(0,d.Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);var m=a(3037),p=a(8271),g=a(9170);function f(){let e=(0,i.useRouter)(),[t,a]=(0,r.useState)(!0),[d,f]=(0,r.useState)([]),[b,w]=(0,r.useState)("all");async function j(){let{data:{user:t}}=await o.O.auth.getUser();t||e.push("/login")}async function v(){try{let{data:{user:e}}=await o.O.auth.getUser();if(!e)return;let{data:t,error:a}=await o.O.from("notifications").select("*").eq("user_id",e.id).order("created_at",{ascending:!1}).limit(50);if(a)throw a;f(t||[])}catch(e){console.error("Erro ao carregar notifica\xe7\xf5es:",e)}finally{a(!1)}}async function y(e){try{let{error:t}=await o.O.from("notifications").update({is_read:!0,read_at:new Date().toISOString()}).eq("id",e);if(t)throw t;await v()}catch(e){console.error("Erro ao marcar como lida:",e)}}async function N(){try{let{data:{user:e}}=await o.O.auth.getUser();if(!e)return;let{error:t}=await o.O.from("notifications").update({is_read:!0,read_at:new Date().toISOString()}).eq("user_id",e.id).eq("is_read",!1);if(t)throw t;await v()}catch(e){console.error("Erro ao marcar todas como lidas:",e)}}async function _(){if(confirm("Deseja excluir todas as notifica\xe7\xf5es lidas? Esta a\xe7\xe3o n\xe3o pode ser desfeita."))try{let{data:{user:e}}=await o.O.auth.getUser();if(!e)return;let{error:t}=await o.O.from("notifications").delete().eq("user_id",e.id).eq("is_read",!0);if(t)throw t;await v()}catch(e){console.error("Erro ao deletar notifica\xe7\xf5es:",e),alert("Erro ao excluir notifica\xe7\xf5es")}}async function k(e){try{let{error:t}=await o.O.from("notifications").delete().eq("id",e);if(t)throw t;await v()}catch(e){console.error("Erro ao deletar notifica\xe7\xe3o:",e)}}(0,r.useEffect)(()=>{j(),v()},[]);let q="unread"===b?d.filter(e=>!e.is_read):d,P=d.filter(e=>!e.is_read).length;return t?s.jsx(g.Z,{children:s.jsx("div",{className:"flex items-center justify-center h-full bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"relative",children:[s.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-red-200 border-t-red-600 mx-auto mb-4"}),s.jsx(m.Z,{className:"w-6 h-6 text-red-600 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"})]}),s.jsx("p",{className:"text-sm font-medium text-slate-600",children:"Carregando notifica\xe7\xf5es..."})]})})}):s.jsx(g.Z,{children:(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:[(0,s.jsxs)("div",{className:"relative overflow-hidden bg-gradient-to-r from-red-600 via-rose-600 to-pink-600 px-8 py-12",children:[s.jsx("div",{className:"absolute inset-0 bg-grid-white/10"}),s.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-white/10 rounded-full blur-3xl"}),s.jsx("div",{className:"absolute bottom-0 left-0 w-96 h-96 bg-pink-500/20 rounded-full blur-3xl"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-white/20 backdrop-blur-xl rounded-lg",children:s.jsx(m.Z,{className:"w-6 h-6 text-white"})}),s.jsx("h1",{className:"text-4xl font-bold text-white",children:"Notifica\xe7\xf5es"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[P>0&&(0,s.jsxs)("button",{onClick:N,className:"group relative px-5 py-3 bg-white text-red-600 rounded-xl font-bold hover:shadow-2xl hover:shadow-white/50 transition-all duration-500 overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"}),(0,s.jsxs)("div",{className:"relative flex items-center gap-2",children:[s.jsx(c,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Marcar todas"}),s.jsx("span",{className:"sm:hidden",children:"Marcar"})]})]}),d.filter(e=>e.is_read).length>0&&s.jsx("button",{onClick:_,className:"group relative px-5 py-3 bg-white/20 backdrop-blur-xl text-white rounded-xl font-bold hover:bg-white/30 transition-all duration-300",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(p.Z,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Limpar"})]})})]})]}),s.jsx("p",{className:"text-red-100 text-lg",children:P>0?`${P} n\xe3o lida${P>1?"s":""}`:"Tudo em dia! \uD83C\uDF89"})]})]}),(0,s.jsxs)("div",{className:"max-w-4xl mx-auto px-6 -mt-8 pb-8",children:[s.jsx("div",{className:"flex gap-3 mb-6",children:[{key:"all",label:"Todas",count:d.length,icon:"\uD83D\uDCEC"},{key:"unread",label:"N\xe3o lidas",count:P,icon:"\uD83D\uDD14"}].map(e=>(0,s.jsxs)("button",{onClick:()=>w(e.key),className:`group px-5 py-3 rounded-xl font-semibold transition-all whitespace-nowrap shadow-sm ${b===e.key?"bg-white text-red-600 shadow-lg border-2 border-red-200 scale-105":"bg-white/70 text-slate-600 hover:bg-white hover:shadow-md border-2 border-transparent"}`,children:[s.jsx("span",{className:"mr-2",children:e.icon}),e.label," (",e.count,")"]},e.key))}),s.jsx("div",{className:"space-y-3",children:0===q.length?(0,s.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-sm border border-slate-200/60 p-16 text-center",children:[s.jsx(m.Z,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),s.jsx("p",{className:"text-lg font-medium text-slate-700 mb-2",children:"unread"===b?"Nenhuma notifica\xe7\xe3o n\xe3o lida":"Nenhuma notifica\xe7\xe3o"}),s.jsx("p",{className:"text-sm text-slate-500",children:"unread"===b?"Voc\xea est\xe1 em dia!":"Quando houver novidades, elas aparecer\xe3o aqui"})]}):q.map(t=>{var a;return s.jsx("div",{className:`group bg-white/80 backdrop-blur-xl rounded-2xl shadow-sm border transition-all duration-300 cursor-pointer overflow-hidden ${t.is_read?"border-slate-200/60 hover:border-slate-300":"border-blue-300 hover:border-blue-400 bg-blue-50/30"}`,onClick:()=>{y(t.id),t.order_id?e.push(`/order/${t.order_id}`):t.quote_id&&e.push(`/quotes/${t.quote_id}`)},children:s.jsx("div",{className:"p-5",children:(0,s.jsxs)("div",{className:"flex gap-4",children:[s.jsx("div",{className:`flex-shrink-0 w-12 h-12 rounded-xl flex items-center justify-center ${{new_order:"bg-blue-100 text-blue-600",order_updated:"bg-purple-100 text-purple-600",order_completed:"bg-green-100 text-green-600",quote_created:"bg-amber-100 text-amber-600",quote_approved:"bg-emerald-100 text-emerald-600",quote_rejected:"bg-red-100 text-red-600",message:"bg-cyan-100 text-cyan-600",system:"bg-slate-100 text-slate-600"}[t.type]||"bg-gray-100 text-gray-600"}`,children:(a=t.type,({new_order:s.jsx(l.Z,{className:"w-5 h-5"}),order_updated:s.jsx(n.Z,{className:"w-5 h-5"}),order_completed:s.jsx(c,{className:"w-5 h-5"}),quote_created:s.jsx(x.Z,{className:"w-5 h-5"}),quote_approved:s.jsx(u,{className:"w-5 h-5"}),quote_rejected:s.jsx(n.Z,{className:"w-5 h-5"}),message:s.jsx(h,{className:"w-5 h-5"}),system:s.jsx(m.Z,{className:"w-5 h-5"})})[a]||s.jsx(m.Z,{className:"w-5 h-5"}))}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-3 mb-1",children:[s.jsx("h3",{className:"font-semibold text-slate-900 text-base",children:t.title}),!t.is_read&&s.jsx("div",{className:"flex-shrink-0 w-2 h-2 bg-blue-600 rounded-full"})]}),s.jsx("p",{className:"text-sm text-slate-600 mb-2 line-clamp-2",children:t.body}),s.jsx("p",{className:"text-xs text-slate-500",children:new Date(t.created_at).toLocaleString("pt-BR",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"})})]}),(0,s.jsxs)("div",{className:"flex-shrink-0 flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[!t.is_read&&s.jsx("button",{onClick:e=>{e.stopPropagation(),y(t.id)},className:"p-2 hover:bg-blue-100 rounded-lg transition-colors",title:"Marcar como lida",children:s.jsx(u,{className:"w-4 h-4 text-blue-600"})}),s.jsx("button",{onClick:e=>{e.stopPropagation(),k(t.id)},className:"p-2 hover:bg-red-100 rounded-lg transition-colors",title:"Excluir",children:s.jsx(p.Z,{className:"w-4 h-4 text-red-600"})})]})]})})},t.id)})})]})]})})}},6138:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(9224).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},8271:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(9224).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},7125:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>i,__esModule:()=>r,default:()=>o});let s=(0,a(6843).createProxy)(String.raw`D:\Projeto\chameiapp\client-portal\app\notifications\page.tsx`),{__esModule:r,$$typeof:i}=s,o=s.default}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[869,837,159],()=>a(2857));module.exports=s})();