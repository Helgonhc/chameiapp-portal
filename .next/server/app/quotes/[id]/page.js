(()=>{var e={};e.id=117,e.ids=[117],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},1597:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d});var s=r(482),a=r(9108),l=r(2563),o=r.n(l),n=r(8300),i={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>n[e]);r.d(t,i);let d=["",{children:["quotes",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,5651)),"D:\\Projeto\\chameiapp\\client-portal\\app\\quotes\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,2917)),"D:\\Projeto\\chameiapp\\client-portal\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9361,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\Projeto\\chameiapp\\client-portal\\app\\quotes\\[id]\\page.tsx"],m="/quotes/[id]/page",x={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/quotes/[id]/page",pathname:"/quotes/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9629:(e,t,r)=>{Promise.resolve().then(r.bind(r,1868))},5901:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2583,23)),Promise.resolve().then(r.t.bind(r,6840,23)),Promise.resolve().then(r.t.bind(r,8771,23)),Promise.resolve().then(r.t.bind(r,3225,23)),Promise.resolve().then(r.t.bind(r,9295,23)),Promise.resolve().then(r.t.bind(r,3982,23))},3576:()=>{},1868:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var s=r(2295),a=r(3729),l=r(2254),o=r(2829),n=r(6138),i=r(3024),d=r(7060),c=r(3229);function m(){let e=(0,l.useRouter)(),t=(0,l.useParams)().id,[r,m]=(0,a.useState)(!0),[x,u]=(0,a.useState)(null),[p,h]=(0,a.useState)(!1),[b,j]=(0,a.useState)(""),[f,v]=(0,a.useState)(!1),[g,N]=(0,a.useState)("");async function y(){let{data:{user:t}}=await o.O.auth.getUser();t||e.push("/login")}async function w(){try{m(!0);let{data:e,error:r}=await o.O.from("quotes").select("*").eq("id",t).single();if(r)throw r;let{data:s,error:a}=await o.O.from("quote_items").select("*").eq("quote_id",t).order("sort_order");if(a)throw a;u({...e,items:s||[]})}catch(e){console.error("Erro ao carregar or\xe7amento:",e),N("Erro ao carregar or\xe7amento")}finally{m(!1)}}async function k(){if(confirm("Tem certeza que deseja aprovar este or\xe7amento?")){h(!0);try{let{error:e}=await o.O.from("quotes").update({status:"approved",approved_at:new Date().toISOString()}).eq("id",t);if(e)throw e;alert("✅ Or\xe7amento aprovado com sucesso! Nossa equipe entrar\xe1 em contato em breve."),await w()}catch(e){console.error("Erro ao aprovar:",e),alert("Erro ao aprovar or\xe7amento")}finally{h(!1)}}}async function _(){if(!b.trim()){alert("Por favor, informe o motivo da rejei\xe7\xe3o");return}h(!0);try{let{error:e}=await o.O.from("quotes").update({status:"rejected",rejected_at:new Date().toISOString(),rejection_reason:b.trim()}).eq("id",t);if(e)throw e;alert("Or\xe7amento rejeitado. Obrigado pelo feedback!"),v(!1),await w()}catch(e){console.error("Erro ao rejeitar:",e),alert("Erro ao rejeitar or\xe7amento")}finally{h(!1)}}function q(){return x&&new Date(x.valid_until)<new Date}return(0,a.useEffect)(()=>{y(),w()},[t]),r?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):g||!x?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50 px-4",children:(0,s.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-xl p-8 max-w-md text-center border border-slate-200/60",children:[s.jsx(n.Z,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),s.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"Erro"}),s.jsx("p",{className:"text-slate-600 mb-4",children:g||"Or\xe7amento n\xe3o encontrado"}),s.jsx("button",{onClick:()=>e.push("/quotes"),className:"text-blue-600 hover:text-blue-700 font-medium",children:"Voltar aos Or\xe7amentos"})]})}):(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-50",children:[s.jsx("header",{className:"bg-white/80 backdrop-blur-xl border-b border-slate-200/60 sticky top-0 z-50",children:s.jsx("div",{className:"max-w-5xl mx-auto px-6 py-4",children:(0,s.jsxs)("button",{onClick:()=>e.back(),className:"flex items-center gap-2 text-slate-600 hover:text-slate-900 transition-colors",children:[s.jsx(i.Z,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:"Voltar"})]})})}),(0,s.jsxs)("main",{className:"max-w-5xl mx-auto px-6 py-8",children:[(0,s.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-sm border border-slate-200/60 p-8 mb-6",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-6",children:[(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-sm font-mono text-slate-500 mb-2",children:x.quote_number}),s.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:x.title}),x.description&&s.jsx("p",{className:"text-slate-600",children:x.description})]}),(0,s.jsxs)("div",{className:"text-right",children:[s.jsx("p",{className:"text-sm text-slate-500 mb-1",children:"V\xe1lido at\xe9"}),s.jsx("p",{className:"text-lg font-semibold text-slate-900",children:new Date(x.valid_until).toLocaleDateString("pt-BR")}),q()&&s.jsx("span",{className:"inline-block mt-2 text-xs px-2 py-1 bg-red-100 text-red-700 rounded-full font-medium",children:"Expirado"})]})]}),"pending"!==x.status&&s.jsx("div",{className:`p-4 rounded-xl border-l-4 ${"approved"===x.status?"bg-emerald-50 border-emerald-500":"bg-red-50 border-red-500"}`,children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:["approved"===x.status?s.jsx(d.Z,{className:"w-6 h-6 text-emerald-600"}):s.jsx(c.Z,{className:"w-6 h-6 text-red-600"}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:`font-semibold ${"approved"===x.status?"text-emerald-900":"text-red-900"}`,children:"approved"===x.status?"Or\xe7amento Aprovado":"Or\xe7amento Rejeitado"}),s.jsx("p",{className:`text-sm ${"approved"===x.status?"text-emerald-700":"text-red-700"}`,children:"approved"===x.status?"Nossa equipe entrar\xe1 em contato em breve para dar continuidade":x.rejection_reason||"Obrigado pelo feedback"})]})]})})]}),(0,s.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-sm border border-slate-200/60 p-8 mb-6",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-6",children:"Itens do Or\xe7amento"}),s.jsx("div",{className:"space-y-4",children:x.items.map(e=>{var t;return(0,s.jsxs)("div",{className:"border border-slate-200 rounded-xl p-5 hover:border-slate-300 transition-colors",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("h3",{className:"font-semibold text-slate-900",children:e.name}),s.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full font-medium ${{service:"bg-blue-100 text-blue-700",material:"bg-purple-100 text-purple-700",labor:"bg-amber-100 text-amber-700"}[e.item_type]||"bg-gray-100 text-gray-700"}`,children:{service:"Servi\xe7o",material:"Material",labor:"M\xe3o de Obra"}[t=e.item_type]||t})]}),e.description&&s.jsx("p",{className:"text-sm text-slate-600",children:e.description})]}),s.jsx("div",{className:"text-right ml-4",children:s.jsx("p",{className:"text-lg font-bold text-slate-900",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e.total)})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-sm text-slate-500",children:[(0,s.jsxs)("span",{children:["Qtd: ",e.quantity]}),s.jsx("span",{children:"•"}),(0,s.jsxs)("span",{children:["Valor unit\xe1rio: ",new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(e.unit_price)]})]})]},e.id)})})]}),(0,s.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-sm border border-slate-200/60 p-8 mb-6",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-6",children:"Resumo Financeiro"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between text-slate-700",children:[s.jsx("span",{children:"Subtotal"}),s.jsx("span",{className:"font-medium",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(x.subtotal)})]}),x.discount>0&&(0,s.jsxs)("div",{className:"flex justify-between text-emerald-600",children:[(0,s.jsxs)("span",{children:["Desconto ","percentage"===x.discount_type?`(${x.discount}%)`:""]}),(0,s.jsxs)("span",{className:"font-medium",children:["- ",new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format("percentage"===x.discount_type?x.subtotal*x.discount/100:x.discount)]})]}),x.tax>0&&(0,s.jsxs)("div",{className:"flex justify-between text-slate-700",children:[s.jsx("span",{children:"Impostos"}),s.jsx("span",{className:"font-medium",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(x.tax)})]}),s.jsx("div",{className:"border-t border-slate-200 pt-3 mt-3",children:(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-lg font-bold text-slate-900",children:"Total"}),s.jsx("span",{className:"text-2xl font-bold text-blue-600",children:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(x.total)})]})})]})]}),(x.notes||x.terms)&&(0,s.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-sm border border-slate-200/60 p-8 mb-6",children:[x.notes&&(0,s.jsxs)("div",{className:"mb-6",children:[s.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:"Observa\xe7\xf5es"}),s.jsx("p",{className:"text-slate-600 whitespace-pre-wrap",children:x.notes})]}),x.terms&&(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"font-semibold text-slate-900 mb-2",children:"Termos e Condi\xe7\xf5es"}),s.jsx("p",{className:"text-slate-600 whitespace-pre-wrap text-sm",children:x.terms})]})]}),"pending"===x.status&&!q()&&(0,s.jsxs)("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-sm border border-slate-200/60 p-8",children:[s.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-4",children:"A\xe7\xf5es"}),s.jsx("p",{className:"text-slate-600 mb-6",children:"Revise o or\xe7amento e escolha uma das op\xe7\xf5es abaixo:"}),(0,s.jsxs)("div",{className:"flex gap-4",children:[s.jsx("button",{onClick:()=>v(!0),disabled:p,className:"flex-1 px-6 py-4 border-2 border-red-300 text-red-700 rounded-2xl font-semibold hover:bg-red-50 transition-all duration-200 disabled:opacity-50",children:"Rejeitar Or\xe7amento"}),(0,s.jsxs)("button",{onClick:k,disabled:p,className:"flex-1 group relative px-6 py-4 bg-gradient-to-r from-emerald-600 to-teal-600 text-white rounded-2xl font-semibold hover:from-emerald-700 hover:to-teal-700 disabled:opacity-50 transition-all duration-300 shadow-lg hover:shadow-2xl overflow-hidden",children:[s.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white/0 via-white/20 to-white/0 translate-x-[-100%] group-hover:translate-x-[100%] transition-transform duration-1000"}),s.jsx("div",{className:"relative flex items-center justify-center gap-2",children:p?(0,s.jsxs)(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),s.jsx("span",{children:"Processando..."})]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx(d.Z,{className:"w-5 h-5"}),s.jsx("span",{children:"Aprovar Or\xe7amento"})]})})]})]})]})]}),f&&s.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-8",children:[s.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-4",children:"Rejeitar Or\xe7amento"}),s.jsx("p",{className:"text-slate-600 mb-4",children:"Por favor, informe o motivo da rejei\xe7\xe3o para que possamos melhorar:"}),s.jsx("textarea",{value:b,onChange:e=>j(e.target.value),placeholder:"Ex: Valor acima do esperado, prazo muito longo, etc.",rows:4,className:"w-full px-4 py-3 border border-slate-300 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-transparent resize-none mb-4"}),(0,s.jsxs)("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:()=>v(!1),disabled:p,className:"flex-1 px-4 py-3 border border-slate-300 text-slate-700 rounded-xl font-medium hover:bg-slate-50 transition-colors",children:"Cancelar"}),s.jsx("button",{onClick:_,disabled:p||!b.trim(),className:"flex-1 px-4 py-3 bg-red-600 text-white rounded-xl font-medium hover:bg-red-700 transition-colors disabled:opacity-50",children:p?"Rejeitando...":"Confirmar Rejei\xe7\xe3o"})]})]})})]})}},2829:(e,t,r)=>{"use strict";r.d(t,{O:()=>o});var s=r(7727);let a=process.env.NEXT_PUBLIC_SUPABASE_URL,l=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY,o=(0,s.eI)(a,l)},9224:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var s=r(3729),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),o=(e,t)=>{let r=(0,s.forwardRef)(({color:r="currentColor",size:o=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:d="",children:c,...m},x)=>(0,s.createElement)("svg",{ref:x,...a,width:o,height:o,stroke:r,strokeWidth:i?24*Number(n)/Number(o):n,className:["lucide",`lucide-${l(e)}`,d].join(" "),...m},[...t.map(([e,t])=>(0,s.createElement)(e,t)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r}},6138:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(9224).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},3024:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(9224).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},7060:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(9224).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},3229:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(9224).Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},2917:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n,metadata:()=>o});var s=r(5036),a=r(265),l=r.n(a);r(7272);let o={title:"Portal do Cliente",description:"Acompanhe seus chamados e servi\xe7os"};function n({children:e}){return s.jsx("html",{lang:"pt-BR",children:s.jsx("body",{className:l().className,children:e})})}},5651:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>l,__esModule:()=>a,default:()=>o});let s=(0,r(6843).createProxy)(String.raw`D:\Projeto\chameiapp\client-portal\app\quotes\[id]\page.tsx`),{__esModule:a,$$typeof:l}=s,o=s.default},7272:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[869,837],()=>r(1597));module.exports=s})();